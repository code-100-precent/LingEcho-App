{
  "project": {
    "name": "LingEcho",
    "version": "1.0.0",
    "description": "开源语音AI框架的完整开发指南",
    "github": "https://github.com/code-100-precent/LingEcho",
    "license": "MIT"
  },
  "sections": [
    {
      "id": "getting-started",
      "title": "快速开始",
      "icon": "Zap",
      "description": "快速安装和运行LingEcho",
      "content": [
        {
          "type": "heading",
          "level": 2,
          "text": "安装和运行"
        },
        {
          "type": "code",
          "language": "bash",
          "content": "# 克隆项目\ngit clone https://github.com/code-100-precent/LingEcho.git\n\n# 前端启动\ncd ui\n\n# 安装依赖\nnpm install\n\n# 启动开发服务器\nnpm run dev\n\n# 构建生产版本\nnpm run build\n\n# 后端启动\ngo run ./cmd/server/.\n"
        },
        {
          "type": "heading",
          "level": 3,
          "text": "系统要求"
        },
        {
          "type": "list",
          "items": [
            {
              "text": "Node.js 18+ - 现代JavaScript运行时环境",
              "icon": "CheckCircle",
              "status": "success"
            },
            {
              "text": "Go 1.21+ - 高性能后端编程语言", 
              "icon": "CheckCircle",
              "status": "success"
            },
            {
              "text": "MySQL 8.0+ 或 PostgreSQL 13+ - 关系型数据库",
              "icon": "CheckCircle",
              "status": "success"
            },
            {
              "text": "Redis 6.0+ - 内存数据库和缓存系统",
              "icon": "CheckCircle",
              "status": "success"
            },
            {
              "text": "Docker 20.0+ - 容器化部署（可选）",
              "icon": "CheckCircle",
              "status": "success"
            },
            {
              "text": "Git 2.30+ - 版本控制系统",
              "icon": "CheckCircle",
              "status": "success"
            }
          ]
        },
        {
          "type": "heading",
          "level": 2,
          "text": "项目结构"
        },
        {
          "type": "code",
          "language": "text",
          "content": "LingEcho/\n├── cmd/                 # 应用程序入口\n│   ├── server/          # Web服务器\n│   └── bootstrap/       # 数据库迁移\n├── internal/            # 内部包\n│   ├── handler/         # HTTP处理器\n│   ├── models/          # 数据模型\n│   └── listeners/       # 事件监听器\n│   └── apidocs/         # 自研api文档配置\n│   └── service/         # 网关服务\n│   └── task/            # 定时任务\n├── pkg/                 # 公共包\n│   ├── backup/          # 自动调度器\n│   ├── cache/           # 缓存\n│   └── llm/             # LLM集成\n│   ├── config/          # 读取配置文件\n│   ├── constants/       # 全局变量\n│   ├── grpcx/           # prc服务器配置\n│   ├── i18n/            # 国际化支持\n│   ├── logger/          # 全局日志\n│   ├── media/           # 语音服务\n│   ├── metrics/         # 监控器\n│   ├── middleware/      # 中间件\n│   ├── notification/    # 消息通知\n│   ├── prompt/          # mcp协议\n│   ├── response/        # http统一响应\n│   ├── search/          # 搜索服务 \n│   ├── session/         # session配置 \n│   ├── sse/             # 权限配置 \n│   ├── storage/         # 服务配置 \n│   ├── utils/           # 工具包 \n│   ├── voice/           # ai语音服务 \n│   ├── webrtc/          # 语音传输 \n│   ├── websocket/       # 传输服务 \n│   ├── workflow/        # 工作流服务 \n│   ├── xhttp/           # http服务 \n├── ui/                  # 前端应用\n│   ├── src/\n│   │   ├── components/  # React组件\n│   │   ├── pages/       # 页面组件\n│   │   └── utils/       # 工具函数\n│   │   └── api/         # 接口处理\n│   │   └── stores/      # 全局方法\n│   └── public/          # 静态资源\n└── docs/                # 文档\n    ├── api/             # API文档\n"
        },
        {
          "type": "heading",
          "level": 2,
          "text": "环境配置"
        },
        {
          "type": "paragraph",
          "text": "创建环境配置文件 .env，以下是所有可配置的环境变量："
        },
        {
          "type": "code",
          "language": "env",
          "content": "# 数据库配置\nDB_DRIVER=sqlite\nDSN=./ling.db\n\n# 服务器配置\nADDR=:7072\nMODE=dev\n\n# 日志配置\nLOG_LEVEL=debug\nLOG_FILENAME=logs/feng.log\nLOG_MAX_SIZE=200\nLOG_MAX_AGE=30\nLOG_MAX_BACKUPS=7\n\n# API路径配置\nDOCS_PREFIX=/api/docs\nAPI_PREFIX=/api\nADMIN_PREFIX=/admin\nAUTH_PREFIX=/auth\n\n# 安全配置\nSESSION_SECRET=your-session-secret\nSESSION_EXPIRE_DAYS=7\nKEY_AUTH_TOKEN_EXPIRED=86400\n\n# 邮件配置\nMAIL_HOST=smtp.zoho.com\nMAIL_USERNAME=your-email@zohomail.com\nMAIL_PASSWORD=your-mail-password\nMAIL_PORT=587\nMAIL_FROM=your-email@zohomail.com\n\n# 七牛ASR配置\nQINIU_ASR_API_KEY=sk-***\nQINIU_ASR_BASE_URL=https://openai.qiniu.com/v1\nQINIU_ASR_TIMEOUT=3000\nQINIU_ASR_RETRIES=3\nQINIU_ASR_LANGUAGE=zh-CN\nQINIU_ASR_MODEL=asr\nQINIU_ASR_ENABLE_PUNC=true\n\n# 七牛TTS配置\nQINIU_TTS_API_KEY=sk-***\nQINIU_TTS_BASE_URL=https://openai.qiniu.com/v1\nQINIU_TTS_TIMEOUT=3000\nQINIU_TTS_RETRIES=3\n\n# 讯飞配置\nXUNFEI_APP_ID=***\nXUNFEI_API_KEY=***\n\n# 讯飞WebSocket配置\nXUNFEI_WS_APP_ID=***\nXUNFEI_WS_API_KEY=***\nXUNFEI_WS_API_SECRET=***"
        },
        {
          "type": "heading",
          "level": 2,
          "text": "快速验证"
        },
        {
          "type": "paragraph",
          "text": "安装完成后，可以通过以下命令验证环境是否正确配置："
        },
        {
          "type": "code",
          "language": "bash",
          "content": "# 检查Go环境\ngo version\n\n# 检查Node.js环境\nnode --version\nnpm --version\n\n# 检查数据库连接\nmysql -u root -p -e \"SELECT VERSION();\"\n\n# 检查Redis连接\nredis-cli ping\n\n# 启动开发服务器\nnpm run dev\n\n# 在另一个终端启动后端\ncd ..\ngo run ./cmd/server/."
        },
        {
          "type": "heading",
          "level": 2,
          "text": "常见问题"
        },
        {
          "type": "list",
          "items": [
            {
              "text": "端口冲突：如果7072端口被占用，请修改.env文件中的PORT配置",
              "icon": "CheckCircle",
              "status": "info"
            },
            {
              "text": "数据库连接失败：检查DATABASE_URL配置和数据库服务是否启动",
              "icon": "CheckCircle",
              "status": "info"
            },
            {
              "text": "Redis连接失败：确保Redis服务正在运行",
              "icon": "CheckCircle",
              "status": "info"
            },
            {
              "text": "文件上传失败：检查UPLOAD_DIR目录权限和磁盘空间",
              "icon": "CheckCircle",
              "status": "info"
            },
            {
              "text": "AI功能不可用：配置正确的API密钥",
              "icon": "CheckCircle",
              "status": "info"
            }
          ]
        }
      ]
    },
    {
      "id": "api-reference",
      "title": "API 参考",
      "icon": "Code",
      "description": "完整的RESTful API文档",
      "content": [
        {
          "type": "heading",
          "level": 2,
          "text": "认证 API"
        },
        {
          "type": "paragraph",
          "text": "所有需要认证的API都需要在请求头中包含Authorization字段："
        },
        {
          "type": "code",
          "language": "http",
          "content": "Authorization: Bearer <your-jwt-token>"
        },
        {
          "type": "api_endpoint",
          "method": "POST",
          "path": "/api/auth/login",
          "title": "用户登录",
          "description": "使用邮箱和密码进行用户认证",
          "auth": false,
          "requestBody": {
            "email": "string",
            "password": "string"
          },
          "response": {
            "code": 200,
            "data": {
              "token": "string",
              "user": {
                "id": "number",
                "email": "string",
                "displayName": "string",
                "avatar": "string"
              }
            }
          }
        },
        {
          "type": "api_endpoint",
          "method": "POST",
          "path": "/api/auth/register",
          "title": "用户注册",
          "description": "创建新用户账户",
          "auth": false,
          "requestBody": {
            "email": "string",
            "password": "string",
            "displayName": "string"
          },
          "response": {
            "code": 201,
            "data": {
              "token": "string",
              "user": {
                "id": "number",
                "email": "string",
                "displayName": "string"
              }
            }
          }
        },
        {
          "type": "heading",
          "level": 2,
          "text": "文件管理 API"
        },
        {
          "type": "api_endpoint",
          "method": "POST",
          "path": "/api/files/upload/",
          "title": "上传单个文件",
          "description": "上传单个文件到服务器",
          "auth": true,
          "requestBody": "multipart/form-data",
          "parameters": [
            {
              "name": "file",
              "type": "File",
              "required": true,
              "description": "要上传的文件"
            },
            {
              "name": "category",
              "type": "string",
              "required": false,
              "description": "文件分类"
            },
            {
              "name": "description",
              "type": "string",
              "required": false,
              "description": "文件描述"
            }
          ],
          "response": {
            "code": 200,
            "data": {
              "id": "number",
              "name": "string",
              "url": "string",
              "size": "number",
              "contentType": "string"
            }
          }
        },
        {
          "type": "api_endpoint",
          "method": "GET",
          "path": "/api/files/",
          "title": "获取文件列表",
          "description": "分页获取用户的文件列表",
          "auth": true,
          "parameters": [
            {
              "name": "page",
              "type": "number",
              "required": false,
              "description": "页码，默认为1"
            },
            {
              "name": "page_size",
              "type": "number",
              "required": false,
              "description": "每页数量，默认为20"
            },
            {
              "name": "category",
              "type": "string",
              "required": false,
              "description": "文件分类筛选"
            }
          ],
          "response": {
            "code": 200,
            "data": {
              "files": [
                {
                  "id": "number",
                  "name": "string",
                  "url": "string",
                  "size": "number",
                  "contentType": "string",
                  "category": "string",
                  "createdAt": "string"
                }
              ],
              "total": "number",
              "page": "number",
              "pageSize": "number"
            }
          }
        },
        {
          "type": "heading",
          "level": 2,
          "text": "AI 分析 API"
        },
        {
          "type": "api_endpoint",
          "method": "POST",
          "path": "/api/ai/analyze/",
          "title": "AI文件分析",
          "description": "使用AI分析上传的文件",
          "auth": true,
          "requestBody": {
            "fileId": "number",
            "analysisType": "string",
            "options": "object"
          },
          "response": {
            "code": 200,
            "data": {
              "id": "number",
              "status": "string",
              "result": "object",
              "insights": "string[]",
              "summary": "string"
            }
          }
        },
        {
          "type": "paragraph",
          "text": "更多API详情请在 http://localhost:7072/api/docs 查看。"
        }
      ]
    },

    {
      "id": "features",
      "title": "功能特性",
      "icon": "Star",
      "description": "LingEcho的核心功能特性",
      "content": [
        {
          "type": "heading",
          "level": 2,
          "text": "核心功能"
        },
        {
          "type": "feature_grid",
          "features": [
            {
              "title": "语音AI助手",
              "icon": "Zap",
              "color": "blue",
              "description": "基于先进的语音识别和自然语言处理技术，提供智能对话和任务执行能力。",
              "features": [
                "实时语音识别",
                "智能对话生成",
                "多语言支持",
                "上下文理解"
              ]
            },
            {
              "title": "工作流管理",
              "icon": "Settings",
              "color": "green",
              "description": "可视化的工作流设计器，支持复杂的业务流程自动化。",
              "features": [
                "拖拽式设计器",
                "条件分支和循环",
                "实时执行监控",
                "错误处理和重试"
              ]
            },
            {
              "title": "知识库管理",
              "icon": "BookOpen",
              "color": "purple",
              "description": "强大的知识库管理系统，支持多种存储后端和AI分析。",
              "features": [
                "多存储后端支持",
                "AI智能分析",
                "版本控制",
                "权限管理"
              ]
            },
            {
              "title": "实时通信",
              "icon": "MessageCircle",
              "color": "cyan",
              "description": "基于WebSocket的实时通信系统，支持消息推送和状态同步。",
              "features": [
                "WebSocket连接",
                "消息推送",
                "状态同步",
                "断线重连"
              ]
            },
            {
              "title": "监控告警",
              "icon": "Activity",
              "color": "red",
              "description": "完善的监控和告警系统，确保系统稳定运行。",
              "features": [
                "性能监控",
                "错误追踪",
                "告警通知",
                "日志分析"
              ]
            }
          ]
        },
        {
          "type": "heading",
          "level": 2,
          "text": "技术栈"
        },
        {
          "type": "tech_stack",
          "categories": [
            {
              "name": "后端技术",
              "technologies": [
                { "name": "Go", "version": "1.21+", "description": "高性能后端语言" },
                { "name": "Gin", "version": "1.9+", "description": "轻量级Web框架" },
                { "name": "GORM", "version": "1.25+", "description": "ORM数据库操作" },
                { "name": "Redis", "version": "6.0+", "description": "缓存和会话存储" },
                { "name": "MySQL/PostgreSQL", "version": "8.0+/13+", "description": "关系型数据库" }
              ]
            },
            {
              "name": "前端技术",
              "technologies": [
                { "name": "React", "version": "18+", "description": "用户界面库" },
                { "name": "TypeScript", "version": "5.0+", "description": "类型安全的JavaScript" },
                { "name": "Vite", "version": "4.0+", "description": "快速构建工具" },
                { "name": "Tailwind CSS", "version": "3.0+", "description": "实用优先的CSS框架" },
                { "name": "Framer Motion", "version": "10+", "description": "动画库" }
              ]
            },
            {
              "name": "AI/ML技术",
              "technologies": [
                { "name": "OpenAI API", "version": "latest", "description": "GPT模型集成" },
                { "name": "Anthropic Claude", "version": "latest", "description": "Claude模型集成" },
                { "name": "Whisper", "version": "latest", "description": "语音识别" },
                { "name": "TTS", "version": "latest", "description": "文本转语音" }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "deployment",
      "title": "部署指南",
      "icon": "Download",
      "description": "生产环境部署和运维指南",
      "content": [
        {
          "type": "heading",
          "level": 2,
          "text": "Docker 部署"
        },
        {
          "type": "paragraph",
          "text": "推荐使用Docker进行部署，确保环境一致性。"
        },
        {
          "type": "code",
          "language": "yaml",
          "content": "# docker-compose.yml\nversion: '3.8'\n\nservices:\n  app:\n    build: .\n    ports:\n      - \"7072:7072\"\n    environment:\n      - DATABASE_URL=mysql://root:password@db:3306/ling_echo\n      - REDIS_URL=redis://redis:6379\n    depends_on:\n      - db\n      - redis\n    volumes:\n      - ./uploads:/app/uploads\n\n  db:\n    image: mysql:8.0\n    environment:\n      - MYSQL_ROOT_PASSWORD=password\n      - MYSQL_DATABASE=ling_echo\n    volumes:\n      - mysql_data:/var/lib/mysql\n\n  redis:\n    image: redis:7-alpine\n    volumes:\n      - redis_data:/data\n\nvolumes:\n  mysql_data:\n  redis_data:"
        },
        {
          "type": "heading",
          "level": 2,
          "text": "Kubernetes 部署"
        },
        {
          "type": "paragraph",
          "text": "对于大规模部署，推荐使用Kubernetes。"
        },
        {
          "type": "code",
          "language": "yaml",
          "content": "# k8s-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: LingEcho\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: LingEcho\n  template:\n    metadata:\n      labels:\n        app: LingEcho\n    spec:\n      containers:\n      - name: app\n        image: LingEcho:latest\n        ports:\n        - containerPort: 7072\n        env:\n        - name: DATABASE_URL\n          valueFrom:\n            secretKeyRef:\n              name: ling-secrets\n              key: database-url\n        resources:\n          requests:\n            memory: \"256Mi\"\n            cpu: \"250m\"\n          limits:\n            memory: \"512Mi\"\n            cpu: \"500m\""
        },
        {
          "type": "heading",
          "level": 2,
          "text": "环境变量配置"
        },
        {
          "type": "env_vars",
          "variables": [
            {
              "name": "DATABASE_URL",
              "type": "string",
              "required": true,
              "description": "数据库连接字符串",
              "example": "mysql://user:password@localhost:3306/ling_echo"
            },
            {
              "name": "REDIS_URL",
              "type": "string",
              "required": true,
              "description": "Redis连接字符串",
              "example": "redis://localhost:6379"
            },
            {
              "name": "JWT_SECRET",
              "type": "string",
              "required": true,
              "description": "JWT签名密钥",
              "example": "your-super-secret-jwt-key"
            },
            {
              "name": "UPLOAD_DIR",
              "type": "string",
              "required": false,
              "description": "文件上传目录",
              "example": "./uploads"
            },
            {
              "name": "MAX_FILE_SIZE",
              "type": "number",
              "required": false,
              "description": "最大文件大小（字节）",
              "example": "10485760"
            },
            {
              "name": "OPENAI_API_KEY",
              "type": "string",
              "required": false,
              "description": "OpenAI API密钥",
              "example": "sk-..."
            },
            {
              "name": "PORT",
              "type": "number",
              "required": false,
              "description": "服务器端口",
              "example": "7072"
            }
          ]
        },
        {
          "type": "heading",
          "level": 2,
          "text": "生产环境优化"
        },
        {
          "type": "optimization_tips",
          "tips": [
            {
              "title": "启用HTTPS",
              "description": "配置SSL证书确保安全传输",
              "icon": "Shield"
            },
            {
              "title": "配置反向代理",
              "description": "使用Nginx或Apache进行负载均衡",
              "icon": "Server"
            },
            {
              "title": "监控和日志",
              "description": "集成Prometheus和ELK Stack",
              "icon": "Activity"
            },
            {
              "title": "数据库优化",
              "description": "配置连接池和索引优化",
              "icon": "Database"
            },
            {
              "title": "缓存策略",
              "description": "合理配置Redis缓存策略",
              "icon": "Zap"
            }
          ]
        }
      ]
    },
    {
      "id": "contributing",
      "title": "贡献指南",
      "icon": "GitBranch",
      "description": "如何为项目贡献代码和文档",
      "content": [
        {
          "type": "heading",
          "level": 2,
          "text": "如何贡献"
        },
        {
          "type": "paragraph",
          "text": "我们欢迎所有形式的贡献，包括但不限于："
        },
        {
          "type": "list",
          "items": [
            {
              "text": "报告Bug和问题",
              "icon": "Bug",
              "status": "info"
            },
            {
              "text": "提交新功能请求",
              "icon": "Lightbulb",
              "status": "info"
            },
            {
              "text": "改进文档",
              "icon": "BookOpen",
              "status": "info"
            },
            {
              "text": "提交代码修复",
              "icon": "Code",
              "status": "info"
            },
            {
              "text": "优化性能",
              "icon": "Zap",
              "status": "info"
            }
          ]
        },
        {
          "type": "heading",
          "level": 2,
          "text": "开发流程"
        },
        {
          "type": "step_list",
          "steps": [
            {
              "step": 1,
              "title": "Fork 项目",
              "description": "在GitHub上Fork本项目到你的账户"
            },
            {
              "step": 2,
              "title": "创建分支",
              "description": "从main分支创建新的功能分支"
            },
            {
              "step": 3,
              "title": "编写代码",
              "description": "实现你的功能或修复，确保代码质量"
            },
            {
              "step": 4,
              "title": "运行测试",
              "description": "确保所有测试通过，添加必要的测试用例"
            },
            {
              "step": 5,
              "title": "提交PR",
              "description": "创建Pull Request，详细描述你的更改"
            }
          ]
        },
        {
          "type": "heading",
          "level": 2,
          "text": "代码规范"
        },
        {
          "type": "code_standards",
          "languages": [
            {
              "name": "Go",
              "standards": [
                "使用gofmt格式化代码",
                "遵循Go官方代码规范",
                "添加必要的注释和文档",
                "使用有意义的变量和函数名"
              ]
            },
            {
              "name": "TypeScript/React",
              "standards": [
                "使用ESLint和Prettier",
                "遵循React最佳实践",
                "使用TypeScript严格模式",
                "组件使用函数式组件和Hooks"
              ]
            }
          ]
        }
      ]
    }
  ]
}
